import{u as y,t as k,d as b,b as x,v as N,x as S,o as B,i as q,f as o,g as r,h as s,y as C,w as l,A as p,B as f,D as h,C as g,E as U,k as E}from"./vendor.1807f42b.js";import{_ as F}from"./index.04321a9e.js";import{a as K}from"./index.15c82977.js";const L={class:"container-fluid row",style:{height:"100%"}},T={class:"col-lg-3 col-md-4 col-sm-5 position-absolute top-50 start-50 translate-middle"},V=o("h4",{class:"text-center",style:{"line-height":"60px"}},[o("img",{alt:"LumbaShark",height:"80",src:F,width:"80"})],-1),A={class:"card"},I={class:"card-body"},M=o("h6",{class:"text-center"},"Login",-1),P=o("br",null,null,-1),R=E(" Login "),Y={setup(W){const w={username:[{required:!0,message:"Username is required"}],password:[{required:!0,message:"Password is required"}]},{cookies:d}=y(),_=K.create({validateStatus:()=>!0}),n=k(),u=b(),c=x(),m=N(null),a=S({username:"",password:"",remember:!1});function v(){var i;(i=m.value)==null||i.validate(t=>{t||_.post("/api/authenticate",{username:a.username,password:a.password}).then(e=>{e.status===201?(n.success("Successfully logged in"),console.log("[SAFETY] Successfully logged in, there is your JWT, please do not share to anyone, just for client development and test: ",e.data.token),a.remember?d.set("access_token",e.data.token,"30d"):d.set("access_token",e.data.token,0),c.params.redirect?u.push(c.params.redirect):u.push({name:"introduce"})):e.status===401?n.warning("Wrong username or password"):n.error("Something went wrong, please try again later")}).catch(e=>{n.error("Something went wrong, please try again later, detail in developer console"),n.error(e.message)})})}return(i,t)=>(B(),q("div",L,[o("div",T,[V,o("div",A,[o("div",I,[M,P,r(s(C),{ref_key:"form",ref:m,model:s(a),rules:w},{default:l(()=>[r(s(p),{label:"Username",path:"username"},{default:l(()=>[r(s(g),{value:s(a).username,"onUpdate:value":t[0]||(t[0]=e=>s(a).username=e),onKeydown:t[1]||(t[1]=f(h(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1}),r(s(p),{label:"Password",path:"password"},{default:l(()=>[r(s(g),{value:s(a).password,"onUpdate:value":t[2]||(t[2]=e=>s(a).password=e),type:"password",onKeydown:t[3]||(t[3]=f(h(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1}),r(s(U),{style:{width:"100%"},type:"primary",onClick:v},{default:l(()=>[R]),_:1})]),_:1},8,["model"])])])])]))}};export{Y as default};
