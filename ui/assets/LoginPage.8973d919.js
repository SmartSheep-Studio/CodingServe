import{e as S,u as q,a as x,D as $,g as B,f as I,I as f,K,o as V,h as C,q as F,l as r,t as h,k as u,p as s,R as M,j as c,S as v,U as w,W as _,V as k,X as R,m as T}from"./vendor.d8a6652f.js";import{_ as U}from"./index.aa82df17.js";const j={class:"container-fluid row",style:{height:"100%"}},D={class:"col-lg-3 col-md-4 col-sm-5 position-absolute top-50 start-50 translate-middle"},E=r("h4",{class:"text-center",style:{"line-height":"60px"}},[r("img",{alt:"LumbaShark",height:"80",src:U,width:"80"})],-1),W={class:"card"},A={class:"card-body"},J={class:"text-center"},L=r("br",null,null,-1),G={setup(X){const{t:n}=S(),y={username:[{required:!0,message:n("user.login.validate.username")}],password:[{required:!0,message:n("user.login.validate.password")}]},{cookies:p}=q(),b=x.create({validateStatus:()=>!0}),l=$(),i=B(),d=I(),m=f(!1),g=f(null),t=K({username:"",password:"",remember:!1});V(()=>{d.params.message&&l.info(d.params.message)});function N(){var o;(o=g.value)==null||o.validate(a=>{a||(m.value=!0,b.post("/api/authenticate",{username:t.username,password:t.password}).then(e=>{e.status===201?(l.success(n("user.login.messages.success")),console.log("[SAFETY] Successfully logged in, there is your JWT, please do not share to anyone, just for client development and test: ",e.data.token),t.remember?p.set("access_token",e.data.token,"30d"):p.set("access_token",e.data.token,0),d.params.redirect?i.push(d.params.redirect).then(()=>i.go()):i.push({name:"introduce"}).then(()=>i.go())):e.status===401?l.warning(n("user.login.message.invalid")):l.error(n("common.messages.request-unknown-error")),m.value=!1}).catch(e=>{l.error(n("common.messages.request-unknown-error")),l.error(e.message),m.value=!1}))})}return(o,a)=>(C(),F("div",j,[r("div",D,[E,r("div",W,[r("div",A,[r("h6",J,h(o.$t("user.login.title")),1),L,u(s(M),{ref_key:"form",ref:g,model:s(t),rules:y},{default:c(()=>[u(s(v),{label:o.$t("user.login.username"),path:"username"},{default:c(()=>[u(s(k),{value:s(t).username,"onUpdate:value":a[0]||(a[0]=e=>s(t).username=e),onKeydown:a[1]||(a[1]=w(_(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1},8,["label"]),u(s(v),{label:o.$t("user.login.password"),path:"password"},{default:c(()=>[u(s(k),{value:s(t).password,"onUpdate:value":a[2]||(a[2]=e=>s(t).password=e),type:"password",onKeydown:a[3]||(a[3]=w(_(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1},8,["label"]),u(s(R),{loading:m.value,style:{width:"100%"},type:"primary",onClick:N},{default:c(()=>[T(h(o.$t("common.actions.login")),1)]),_:1},8,["loading"])]),_:1},8,["model"])])])])]))}};export{G as default};
