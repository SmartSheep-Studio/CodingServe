import{e as S,u as q,a as x,L as $,g as B,f as V,Q as f,r as C,o as F,i as I,s as K,m as r,t as h,l as u,q as s,S as M,k as c,V as v,W as w,Y as _,X as k,Z as T,p as E}from"./vendor.87e1a7ff.js";import{_ as L}from"./index.f03dac3d.js";const R={class:"container-fluid row",style:{height:"100%"}},U={class:"col-lg-3 col-md-4 col-sm-5 position-absolute top-50 start-50 translate-middle"},W=r("h4",{class:"text-center",style:{"line-height":"60px"}},[r("img",{alt:"LumbaShark",height:"80",src:L,width:"80"})],-1),Y={class:"card"},j={class:"card-body"},A={class:"text-center"},D=r("br",null,null,-1),Z={setup(J){const{t:n}=S(),y={username:[{required:!0,message:n("user.login.validate.username")}],password:[{required:!0,message:n("user.login.validate.password")}]},{cookies:p}=q(),b=x.create({validateStatus:()=>!0}),l=$(),i=B(),d=V(),m=f(!1),g=f(null),t=C({username:"",password:"",remember:!1});F(()=>{d.params.message&&l.info(d.params.message)});function N(){var o;(o=g.value)==null||o.validate(a=>{a||(m.value=!0,b.post("/api/authenticate",{username:t.username,password:t.password}).then(e=>{e.status===201?(l.success(n("user.login.messages.success")),console.log("[SAFETY] Successfully logged in, there is your JWT, please do not share to anyone, just for client development and test: ",e.data.token),t.remember?p.set("access_token",e.data.token,"30d"):p.set("access_token",e.data.token,0),d.params.redirect?i.push(d.params.redirect).then(()=>i.go()):i.push({name:"introduce"}).then(()=>i.go())):e.status===401?l.warning(n("user.login.messages.invalid")):l.error(n("common.messages.request-unknown-error")),m.value=!1}).catch(e=>{l.error(n("common.messages.request-unknown-error")),l.error(e.message),m.value=!1}))})}return(o,a)=>(I(),K("div",R,[r("div",U,[W,r("div",Y,[r("div",j,[r("h6",A,h(o.$t("user.login.title")),1),D,u(s(M),{ref_key:"form",ref:g,model:s(t),rules:y},{default:c(()=>[u(s(v),{label:o.$t("user.login.username"),path:"username"},{default:c(()=>[u(s(k),{value:s(t).username,"onUpdate:value":a[0]||(a[0]=e=>s(t).username=e),onKeydown:a[1]||(a[1]=w(_(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1},8,["label"]),u(s(v),{label:o.$t("user.login.password"),path:"password"},{default:c(()=>[u(s(k),{value:s(t).password,"onUpdate:value":a[2]||(a[2]=e=>s(t).password=e),type:"password",onKeydown:a[3]||(a[3]=w(_(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1},8,["label"]),u(s(T),{loading:m.value,style:{width:"100%"},type:"primary",onClick:N},{default:c(()=>[E(h(o.$t("common.actions.login")),1)]),_:1},8,["loading"])]),_:1},8,["model"])])])])]))}};export{Z as default};
