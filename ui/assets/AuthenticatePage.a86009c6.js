import{_ as H}from"./index.04321a9e.js";import{F as K,G as W,H as Z,I as ee,u as te,t as ne,d as ae,b as oe,v as B,r as ie,o as b,i as y,g as L,h as P,f as n,J as x,w as M,k as E,K as se,L as re,M as le,s as ce}from"./vendor.1807f42b.js";import{a as F}from"./index.15c82977.js";var I={exports:{}},ue=K(W);(function($,S){(function(f,g){$.exports=g(ue)})(Z,function(f){return(()=>{var g={553:(e,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.default=(a,w)=>{const v=a.__vccOpts||a;for(const[u,d]of w)v[u]=d;return v}},976:e=>{e.exports=f}},_={};function s(e){var i=_[e];if(i!==void 0)return i.exports;var a=_[e]={exports:{}};return g[e](a,a.exports,s),a.exports}s.d=(e,i)=>{for(var a in i)s.o(i,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:i[a]})},s.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),s.r=e=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{s.r(r),s.d(r,{Component:()=>N,Plugin:()=>T,default:()=>U,useLoading:()=>A});var e=s(976);function i(t,o,c){let m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const h=(0,e.h)(t,o,m),p=document.createElement("div");return p.classList.add("vld-container"),c.appendChild(p),(0,e.render)(h,p),h.component}const a=typeof window!="undefined"?window.HTMLElement:Object,w=["aria-busy"],v={class:"vld-icon"},u={mounted(){this.enforceFocus&&document.addEventListener("focusin",this.focusIn)},methods:{focusIn(t){if(!this.isActive||t.target===this.$refs.root||this.$refs.root.contains(t.target))return;let o=this.container?this.container:this.isFullPage?null:this.$refs.root.parentElement;(this.isFullPage||o&&o.contains(t.target))&&(t.preventDefault(),this.$refs.root.focus())}},beforeUnmount(){document.removeEventListener("focusin",this.focusIn)}},d=["width","height","stroke"],k=[(0,e.createStaticVNode)('<g fill="none" fill-rule="evenodd"><g transform="translate(1 1)" stroke-width="2"><circle stroke-opacity=".25" cx="18" cy="18" r="18"></circle><path d="M36 18c0-9.94-8.06-18-18-18"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="0.8s" repeatCount="indefinite"></animateTransform></path></g></g>',1)],l=(0,e.defineComponent)({name:"spinner",props:{color:{type:String,default:"#000"},height:{type:Number,default:64},width:{type:Number,default:64}}});var C=s(553);const O=(0,C.default)(l,[["render",function(t,o,c,m,h,p){return(0,e.openBlock)(),(0,e.createElementBlock)("svg",{viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",width:t.width,height:t.height,stroke:t.color},k,8,d)}]]),j=["fill","width","height"],V=[(0,e.createStaticVNode)('<circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="60" cy="15" r="9" fill-opacity="0.3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="0.5" to="0.5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle>',3)],q=(0,e.defineComponent)({name:"dots",props:{color:{type:String,default:"#000"},height:{type:Number,default:240},width:{type:Number,default:60}}}),z=(0,C.default)(q,[["render",function(t,o,c,m,h,p){return(0,e.openBlock)(),(0,e.createElementBlock)("svg",{viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:t.color,width:t.width,height:t.height},V,8,j)}]]),D=["height","width","fill"],X=[(0,e.createStaticVNode)('<rect x="0" y="13" width="4" height="5"><animate attributeName="height" attributeType="XML" values="5;21;5" begin="0s" dur="0.6s" repeatCount="indefinite"></animate><animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0s" dur="0.6s" repeatCount="indefinite"></animate></rect><rect x="10" y="13" width="4" height="5"><animate attributeName="height" attributeType="XML" values="5;21;5" begin="0.15s" dur="0.6s" repeatCount="indefinite"></animate><animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0.15s" dur="0.6s" repeatCount="indefinite"></animate></rect><rect x="20" y="13" width="4" height="5"><animate attributeName="height" attributeType="XML" values="5;21;5" begin="0.3s" dur="0.6s" repeatCount="indefinite"></animate><animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0.3s" dur="0.6s" repeatCount="indefinite"></animate></rect>',3)],R=(0,e.defineComponent)({name:"bars",props:{color:{type:String,default:"#000"},height:{type:Number,default:40},width:{type:Number,default:40}}}),Q={Spinner:O,Dots:z,Bars:(0,C.default)(R,[["render",function(t,o,c,m,h,p){return(0,e.openBlock)(),(0,e.createElementBlock)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",height:t.height,width:t.width,fill:t.color},X,8,D)}]])},G=(0,e.defineComponent)({name:"vue-loading",mixins:[u],props:{active:Boolean,programmatic:Boolean,container:[Object,Function,a],isFullPage:{type:Boolean,default:!0},enforceFocus:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!1},transition:{type:String,default:"fade"},canCancel:Boolean,onCancel:{type:Function,default:()=>{}},color:String,backgroundColor:String,blur:{type:String,default:"2px"},opacity:Number,width:Number,height:Number,zIndex:Number,loader:{type:String,default:"spinner"}},emits:["hide","update:active"],data(){return{isActive:this.active}},components:Q,mounted(){document.addEventListener("keyup",this.keyPress)},methods:{cancel(){this.canCancel&&this.isActive&&(this.hide(),this.onCancel.apply(null,arguments))},hide(){this.$emit("hide"),this.$emit("update:active",!1),this.programmatic&&(this.isActive=!1,setTimeout(()=>{const t=this.$refs.root.parentElement;var o,c;(0,e.render)(null,t),(o=t).remove!==void 0?o.remove():(c=o.parentNode)===null||c===void 0||c.removeChild(o)},150))},disableScroll(){this.isFullPage&&this.lockScroll&&document.body.classList.add("vld-shown")},enableScroll(){this.isFullPage&&this.lockScroll&&document.body.classList.remove("vld-shown")},keyPress(t){t.keyCode===27&&this.cancel()}},watch:{active(t){this.isActive=t},isActive(t){t?this.disableScroll():this.enableScroll()}},computed:{bgStyle(){return{background:this.backgroundColor,opacity:this.opacity,backdropFilter:"blur(".concat(this.blur,")")}}},beforeUnmount(){document.removeEventListener("keyup",this.keyPress)}}),J=(0,C.default)(G,[["render",function(t,o,c,m,h,p){return(0,e.openBlock)(),(0,e.createBlock)(e.Transition,{ref:"root",name:t.transition},{default:(0,e.withCtx)(()=>[(0,e.withDirectives)((0,e.createElementVNode)("div",{tabindex:"0",class:(0,e.normalizeClass)(["vld-overlay is-active",{"is-full-page":t.isFullPage}]),"aria-busy":t.isActive,"aria-label":"Loading",style:(0,e.normalizeStyle)({zIndex:t.zIndex})},[(0,e.createElementVNode)("div",{class:"vld-background",onClick:o[0]||(o[0]=(0,e.withModifiers)(function(){return t.cancel&&t.cancel(...arguments)},["prevent"])),style:(0,e.normalizeStyle)(t.bgStyle)},null,4),(0,e.createElementVNode)("div",v,[(0,e.renderSlot)(t.$slots,"before"),(0,e.renderSlot)(t.$slots,"default",{},()=>[((0,e.openBlock)(),(0,e.createBlock)((0,e.resolveDynamicComponent)(t.loader),{color:t.color,width:t.width,height:t.height},null,8,["color","width","height"]))]),(0,e.renderSlot)(t.$slots,"after")])],14,w),[[e.vShow,t.isActive]])]),_:3},8,["name"])}]]),N=J;function A(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{show(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t,m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;const h=Object.assign({},t,c,{programmatic:!0,lockScroll:!0,isFullPage:!1,active:!0});let p=h.container;h.container||(p=document.body,h.isFullPage=!0);const Y=Object.assign({},o,m);return{hide:i(N,h,p,Y).ctx.hide}}}}const T=function(t){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const m=A(o,c);t.config.globalProperties.$loading=m,t.provide("$loading",m)};N.install=T;const U=N})(),r})()})})(I);var de=ee(I.exports);const he={class:"container-fluid row",style:{height:"100%"}},me={class:"col-lg-4 col-md-5 col-sm-6 position-absolute top-50 start-50 translate-middle"},pe=n("h4",{class:"text-center",style:{"line-height":"60px"}},[n("img",{alt:"LumbaShark",height:"80",src:H,width:"80"})],-1),ge={key:0,class:"card"},fe=n("div",{class:"card-body text-center"},[n("span",null,[n("b",null,"Loading...")])],-1),ve=[fe],be={key:1,class:"card text-white bg-danger mb-3"},ye={class:"card-body"},_e={class:"text-center"},we=n("h6",null,"Authenticate failed",-1),ke=n("hr",null,null,-1),xe={class:"card-text"},Se=ce(' You can follow the steps to try to solve this problem: <ol><li>Check your network status</li><li>Search the error code in document</li><li> Open a question in <a class="text-white" href="https://fed.smartsheep.space/t/faq"><b>FedSheep</b></a></li><li> Join our discord chat <a class="text-white" href="https://discord.gg/F4SgsEfQQ3"><b>Sheepland</b></a></li><li> Just send email to me <a class="text-white" href="mailto:littlesheep.code@hotmail.com"><b>littlesheep.code@hotmail.com</b></a></li></ol> If you want cancel the authenticate now, you can ',3),Ce=n("b",null,"click here",-1),Ne={key:2,class:"card"},Be={class:"card-body pb-0"},Le={class:"text-center"},Pe=["src"],Me={class:"text-secondary"},Fe=n("br",null,null,-1),Ee=n("span",null,"Want get your account information and get these permissions",-1),$e=n("hr",null,null,-1),Ae={class:"card-body pt-0"},Te=n("h6",{class:"text-center"},"Required Permissions",-1),Ie={class:"list-group"},Oe={class:"list-group-item"},je=n("input",{disabled:"",checked:"checked",class:"form-check-input me-1",type:"checkbox"},null,-1),Ve={class:"pt-3"},qe=n("button",{type:"button",class:"btn btn-secondary float-start",style:{width:"49%"}}," Cancel ",-1),ze=E(" Are you really want cancel the authenticate? We will take you to the introduce page. "),De=n("br",null,null,-1),Xe=n("br",null,null,-1),Re={class:"text-center"},Qe={class:"text-secondary"},Ge=E("You are grant access with "),He={setup($){const{cookies:S}=te(),f=F.create({validateStatus:()=>!0}),g=ne(),_=ae(),s=oe(),r=B(!1),e=B({}),i=B({}),a=B({});function w(){r.value=!0,f.post("/api/oauth",{client_id:s.query.client_id},{headers:{Authorization:"Bearer "+S.get("access_token")}}).then(u=>{r.value=!1,u.status===200?window.location.href=s.query.redirect_uri+"?code="+u.data.code:(g.error("Something went wrong, please try again later, detail in developer console"),console.error("Request response: ",u),r.value=!1)}).catch(u=>{g.error("Something went wrong, please try again later, detail in developer console"),console.error(u.message),r.value=!1})}function v(){if(!S.isKey("access_token")){g.info("You didn't login yet, please login first"),_.push({name:"user.login",params:{redirect:s.fullPath}});return}r.value=!0;const u=f.get("/api/oauth",{params:s.query}),d=f.get("/api/management/developer/scopes"),k=f.get("/api/authenticate/profile",{headers:{Authorization:"Bearer "+S.get("access_token")}});F.all([u,d,k]).then(F.spread((...l)=>{l[0].status===200?(a.value=l[0].data,i.value=l[1].data.data,e.value=l[2].data,r.value=!1):(g.error("Something went wrong, please try again later, detail in developer console"),console.error("Request response errors: ",l),r.value=!1)}))}return v(),(u,d)=>{const k=ie("router-link");return b(),y("div",he,[L(P(de),{active:r.value,"onUpdate:active":d[0]||(d[0]=l=>r.value=l),"can-cancel":!1,"is-full-page":!0},null,8,["active"]),n("div",me,[pe,r.value?(b(),y("div",ge,ve)):a.value.error?(b(),y("div",be,[n("div",ye,[n("div",_e,[we,n("span",null,x(a.value.error),1)]),ke,n("div",xe,[Se,L(k,{to:{name:"introduce"},class:"text-white",href:"https://discord.gg/F4SgsEfQQ3"},{default:M(()=>[Ce]),_:1})])])])):(b(),y("div",Ne,[n("div",Be,[n("div",Le,[n("div",null,[n("img",{src:a.value.client.avatar,class:"rounded-circle",width:"42",height:"42"},null,8,Pe)]),n("span",null,[E(x(a.value.client.client_name)+" ",1),n("span",Me,x(a.value.developer.username),1)]),Fe,Ee])]),$e,n("div",Ae,[Te,n("div",null,[n("ul",Ie,[(b(!0),y(se,null,re(a.value.client.scope.split(","),l=>(b(),y("li",Oe,[je,n("span",null,"\xA0"+x(i.value.details[l]),1)]))),256))])]),n("div",Ve,[L(P(le),{onPositiveClick:d[1]||(d[1]=l=>P(_).push({name:"introduce"}))},{trigger:M(()=>[qe]),default:M(()=>[ze]),_:1}),n("button",{type:"button",class:"btn btn-success float-end",style:{width:"49%"},onClick:d[2]||(d[2]=l=>w())}," Grant access "),De,Xe,n("div",Re,[n("span",Qe,[Ge,n("b",null,x(e.value.username),1)])])])])]))])])}}};export{He as default};
