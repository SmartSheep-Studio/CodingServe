import{d as P,t as S,v as h,x as U,o as c,i as g,f as n,g as t,h as r,y as _,w as l,z as b,A as d,B as u,C as m,D as f,E as C,k}from"./vendor.1807f42b.js";import{_ as N}from"./index.04321a9e.js";import{a as V}from"./index.15c82977.js";const F={class:"container-fluid row",style:{height:"100%"}},K={class:"col-lg-3 col-md-4 col-sm-5 position-absolute top-50 start-50 translate-middle"},B=n("h4",{class:"text-center",style:{"line-height":"60px"}},[n("img",{alt:"LumbaShark",height:"80",src:N,width:"80"})],-1),z={class:"card"},A={key:0,class:"card-body"},D=n("h6",{class:"text-center"},"Sign Up",-1),I=n("br",null,null,-1),R=k(" Sign Up "),Z={key:1,class:"card-body"},$=n("h6",{class:"text-center"},"Sign Up",-1),M=n("br",null,null,-1),T=k(" Verify "),G={setup(Y){const w={username:[{required:!0,message:"Username is required"}],email:[{required:!0,message:"Email is required"},{validator:(i,e)=>{if(!new RegExp(/^\w+((.\w+)|(-\w+))@[A-Za-z0-9]+((.|-)[A-Za-z0-9]+).[A-Za-z0-9]+$/).test(e))return new Error("Please enter the vaild email")}}],password:[{required:!0,message:"Password is required"}],confirmPassword:[{required:!0,message:"Please enter the password again"},{validator:(i,e)=>{if(e!==s.password)return new Error("The confirm password isn't match")}}],verifyCode:[{required:!0,message:"Verify Code is required"}]},x=P(),y=V.create({validateStatus:()=>!0}),o=S(),p=h(null),v=h(0),s=U({email:"",username:"",password:"",confirmPassword:"",agreement:!1,verifyCode:""});function E(){var i;(i=p.value)==null||i.validate(e=>{e||y.post("/api/management/users",{username:s.username,password:s.password,email:s.email}).catch(()=>{o.error("Failed to sign up, request error, detail in the developer console.")}).then(a=>{a.status===201?(o.success("Sign up successfully, we send a email to your inbox, please check it then to active your account."),v.value++):a.data.error==="DataError#2"?o.warning("Your email has been registered, please login."):a.data.error==="DataError#1"?o.warning("Your username has been used, please change."):a.data.error==="ServerError#1"?(console.error(a.data.message),o.error("Failed to sign up, server database error, detail in the developer console.")):a.data.error==="ServerError#2"?(console.error(a.data.message),o.error("Failed to sign up, server mailer error, detail in the developer console.")):o.error("Something went wrong, please try again later")})})}function q(){var i;(i=p.value)==null||i.validate(e=>{e||y.post(`/api/management/users?verify=${s.verifyCode}`).catch(()=>{o.error("Failed to verify, request error, detail in the developer console.")}).then(a=>{a.status===200?(o.success("Verify successfully! Register completed! Please login."),x.push({name:"user.login"})):a.data.error==="DataError"?o.warning("Invaild verify code, please check it again. Or go back register again."):a.data.error==="ServerError"?(console.error(a.data.message),o.error("Failed to sign up, server database error, detail in the developer console.")):o.error("Something went wrong, please try again later")})})}return(i,e)=>(c(),g("div",F,[n("div",K,[B,n("div",z,[v.value===0?(c(),g("div",A,[D,I,t(r(_),{ref_key:"form",ref:p,model:r(s),rules:w},{default:l(()=>[t(r(d),{label:"Username",path:"username"},{default:l(()=>[t(r(m),{value:r(s).username,"onUpdate:value":e[0]||(e[0]=a=>r(s).username=a),onKeydown:e[1]||(e[1]=u(f(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1}),t(r(d),{label:"Email",path:"email"},{default:l(()=>[t(r(m),{value:r(s).email,"onUpdate:value":e[2]||(e[2]=a=>r(s).email=a),onKeydown:e[3]||(e[3]=u(f(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1}),t(r(d),{label:"Password",path:"password"},{default:l(()=>[t(r(m),{value:r(s).password,"onUpdate:value":e[4]||(e[4]=a=>r(s).password=a),type:"password",onKeydown:e[5]||(e[5]=u(f(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1}),t(r(d),{label:"Confirm Password",path:"confirmPassword"},{default:l(()=>[t(r(m),{value:r(s).confirmPassword,"onUpdate:value":e[6]||(e[6]=a=>r(s).confirmPassword=a),type:"password",onKeydown:e[7]||(e[7]=u(f(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1}),t(r(C),{style:{width:"100%"},type:"primary",onClick:E},{default:l(()=>[R]),_:1})]),_:1},8,["model"])])):b("",!0),v.value===1?(c(),g("div",Z,[$,M,t(r(_),{ref_key:"form",ref:p,model:r(s),rules:w},{default:l(()=>[t(r(d),{label:"Verify Code",path:"verifyCode"},{default:l(()=>[t(r(m),{value:r(s).verifyCode,"onUpdate:value":e[8]||(e[8]=a=>r(s).verifyCode=a),onKeydown:e[9]||(e[9]=u(f(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1}),t(r(C),{style:{width:"100%"},type:"primary",onClick:q},{default:l(()=>[T]),_:1})]),_:1},8,["model"])])):b("",!0)])])]))}};export{G as default};
