import{e as N,u as x,a as S,D as q,g as B,f as I,I as f,K,o as V,h as $,q as C,l as o,t as F,k as u,p as s,R as M,j as c,S as h,U as v,W as w,V as _,X as R,m as T}from"./vendor.d8a6652f.js";import{_ as U}from"./index.36d08e23.js";const j={class:"container-fluid row",style:{height:"100%"}},D={class:"col-lg-3 col-md-4 col-sm-5 position-absolute top-50 start-50 translate-middle"},E=o("h4",{class:"text-center",style:{"line-height":"60px"}},[o("img",{alt:"LumbaShark",height:"80",src:U,width:"80"})],-1),L={class:"card"},W={class:"card-body"},A={class:"text-center"},J=o("br",null,null,-1),X=T(" Login "),H={setup(Y){const{t:r}=N(),k={username:[{required:!0,message:r("user.login.validate.username")}],password:[{required:!0,message:r("user.login.validate.password")}]},{cookies:p}=x(),y=S.create({validateStatus:()=>!0}),n=q(),i=B(),d=I(),m=f(!1),g=f(null),a=K({username:"",password:"",remember:!1});V(()=>{d.params.message&&n.info(d.params.message)});function b(){var l;(l=g.value)==null||l.validate(t=>{t||(m.value=!0,y.post("/api/authenticate",{username:a.username,password:a.password}).then(e=>{e.status===201?(n.success(r("user.login.messages.success")),console.log("[SAFETY] Successfully logged in, there is your JWT, please do not share to anyone, just for client development and test: ",e.data.token),a.remember?p.set("access_token",e.data.token,"30d"):p.set("access_token",e.data.token,0),d.params.redirect?i.push(d.params.redirect).then(()=>i.go()):i.push({name:"introduce"}).then(()=>i.go())):e.status===401?n.warning(r("user.login.message.invalid")):n.error(r("common.messages.request-unknown-error")),m.value=!1}).catch(e=>{n.error(r("common.messages.request-unknown-error")),n.error(e.message),m.value=!1}))})}return(l,t)=>($(),C("div",j,[o("div",D,[E,o("div",L,[o("div",W,[o("h6",A,F(l.$t("user.login.title")),1),J,u(s(M),{ref_key:"form",ref:g,model:s(a),rules:k},{default:c(()=>[u(s(h),{label:l.$t("user.login.username"),path:"username"},{default:c(()=>[u(s(_),{value:s(a).username,"onUpdate:value":t[0]||(t[0]=e=>s(a).username=e),onKeydown:t[1]||(t[1]=v(w(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1},8,["label"]),u(s(h),{label:l.$t("user.login.password"),path:"password"},{default:c(()=>[u(s(_),{value:s(a).password,"onUpdate:value":t[2]||(t[2]=e=>s(a).password=e),type:"password",onKeydown:t[3]||(t[3]=v(w(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1},8,["label"]),u(s(R),{loading:m.value,style:{width:"100%"},type:"primary",onClick:b},{default:c(()=>[X]),_:1},8,["loading"])]),_:1},8,["model"])])])])]))}};export{H as default};
