import{c as P,a as O,u as h,d as I,b as p,e as R,f as w,o as V,r as v,g as f,h as k,w as c,i as o,j as u,n as b,k as y,l as E,T as q,m as C,N as D,p as m,q as N,s as F,t as B}from"./vendor.19b3a550.js";const j=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function r(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(e){if(e.ep)return;e.ep=!0;const n=r(e);fetch(e.href,n)}};j();const $="modulepreload",T={},z="/",d=function(i,r){return!r||r.length===0?i():Promise.all(r.map(t=>{if(t=`${z}${t}`,t in T)return;T[t]=!0;const e=t.endsWith(".css"),n=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${n}`))return;const a=document.createElement("link");if(a.rel=e?"stylesheet":$,e||(a.as="script",a.crossOrigin=""),a.href=t,document.head.appendChild(a),e)return new Promise((s,g)=>{a.addEventListener("load",s),a.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${t}`)))})})).then(()=>i())},L=P({history:O(),routes:[{path:"/",name:"introduce",component:()=>d(()=>import("./IntroducePage.acdbad68.js"),["assets/IntroducePage.acdbad68.js","assets/IntroducePage.79301e0d.css","assets/vendor.19b3a550.js","assets/plugin-vue_export-helper.21dcd24c.js"])},{path:"/faqs",name:"faqs",component:()=>d(()=>import("./FAQsPage.02ff6a98.js"),["assets/FAQsPage.02ff6a98.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/vendor.19b3a550.js"])},{path:"/agreement",name:"agreement",component:()=>d(()=>import("./AgreementPage.01e9e4d7.js"),["assets/AgreementPage.01e9e4d7.js","assets/vendor.19b3a550.js","assets/VueElementLoading.common.0be4f9d8.js"])},{path:"/user/signup",name:"user.signup",component:()=>d(()=>import("./SignUpPage.1b250a7e.js"),["assets/SignUpPage.1b250a7e.js","assets/vendor.19b3a550.js"])},{path:"/user/login",name:"user.login",component:()=>d(()=>import("./LoginPage.4d4f14a2.js"),["assets/LoginPage.4d4f14a2.js","assets/vendor.19b3a550.js"])},{path:"/developer/signup",name:"developer.signup",component:()=>d(()=>import("./SignUpDeveloperPage.a5ae74f4.js"),["assets/SignUpDeveloperPage.a5ae74f4.js","assets/vendor.19b3a550.js","assets/VueElementLoading.common.0be4f9d8.js"]),meta:{requiredLogin:!0}},{path:"/developer",name:"developer.center",component:()=>d(()=>import("./DeveloperCenterPage.929edc07.js"),["assets/DeveloperCenterPage.929edc07.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/vendor.19b3a550.js"]),meta:{requiredLogin:!0}},{path:"/oauth",name:"oauth.authenticate",component:()=>d(()=>import("./AuthenticatePage.fbe033fb.js"),["assets/AuthenticatePage.fbe033fb.js","assets/vendor.19b3a550.js","assets/VueElementLoading.common.0be4f9d8.js"])},{path:"/oauth/callback",name:"oauth.callback",component:()=>d(()=>import("./AuthenticateDefaultCallbackPage.6cdb2eb4.js"),["assets/AuthenticateDefaultCallbackPage.6cdb2eb4.js","assets/vendor.19b3a550.js"])}]});L.beforeEach((l,i,r)=>{if(l.meta.requiredLogin){const{cookies:t}=h();t.isKey("access_token")?r():r({name:"user.login",params:{redirect:l.fullPath,message:"To access this page, you need login first!"}})}else r()});var x="/assets/Logo.3586b61e.png";const K=I("main",{state:()=>({status:{useable:!1,pulling:!1},account:{accessToken:"",accountProfile:{},accountGroup:{}}}),actions:{init(){return new Promise((l,i)=>{const r=p.create({validateStatus:()=>!0}),{cookies:t}=h(),e=t.get("access_token");if(e){this.status.pulling=!0,this.account.accessToken=e;const n=r.get("/api/authenticate/profile",{headers:{Authorization:"Bearer "+t.get("access_token")}}),a=r.get("/api/management/groups",{headers:{Authorization:"Bearer "+t.get("access_token")}});p.all([n,a]).then(p.spread((...s)=>{s[0].status===200?(this.account.accountProfile=s[0].data,console.log("[STATE] Success get user information: ",s[0])):(console.error("[STATE] Failed get user information: ",s[0]),i(!1)),s[1].status===200?(this.account.accountGroup=s[1].data.data,console.log("[STATE] Success get user group information: ",s[1])):(console.error("[STATE] Failed get user group information: ",s[1]),i(!1)),this.status.pulling=!1,s[0].status===200&&s[1].status===200?(this.status.useable=!0,l(!0)):l(!1)}))}else console.log("[STATE] No access token found, skip fetch user information"),this.status.useable=!0,l(!1)})}}});const G={id:"root"},M={class:"container"},Q={class:"d-flex flex-wrap align-items-center justify-content-center justify-content-md-between py-3 mb-4 border-bottom"},U=o("a",{class:"d-flex align-items-center col-md-3 mb-2 mb-md-0 text-dark text-decoration-none",href:"/"},[o("img",{alt:"Logo",height:"42",src:x,width:"42"}),m(" \xA0 LumbaShark ")],-1),W={class:"nav col-12 col-md-auto mb-2 justify-content-center mb-md-0"},H=m("Introduce"),J=m("FAQs"),X={key:0,class:"col-md-3 text-end"},Y=m("Login"),Z=m("Sign Up"),ee={key:1,class:"col-md-3 text-end"},te={id:"content"},oe={class:"container"},ne={class:"d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top"},se=o("p",{class:"col-md-4 mb-0 text-muted"},"SmartSheep Studio \xA9 2022",-1),ae=o("a",{class:"col-md-4 d-flex align-items-center justify-content-center mb-3 mb-md-0 me-md-auto link-dark text-decoration-none",href:"/"},[o("img",{alt:"Logo",height:"42",src:x,width:"42"})],-1),re={class:"nav col-md-4 justify-content-end"},ie={class:"nav-item"},ce=m("Introduce"),le={class:"nav-item"},ue=m("FAQs"),de={class:"nav-item"},me=m("Developer"),_e={setup(l){const{cookies:i}=h(),r=K(),t=R(),e=w();function n(s){return s===t.name?"nav-link px-2 link-secondary":"nav-link px-2 link-dark"}function a(){i.remove("access_token"),e.go()}return V(()=>{r.init().then(s=>{s||console.error("[STORE] Failed to init store")}).catch(()=>{console.error("[STORE] Failed to init store(FATAL)")})}),(s,g)=>{const _=v("router-link"),A=v("router-view");return f(),k(y(D),null,{default:c(()=>[o("div",G,[o("div",M,[o("header",Q,[U,o("ul",W,[o("li",null,[u(_,{class:b(n("introduce")),to:{name:"introduce"}},{default:c(()=>[H]),_:1},8,["class"])]),o("li",null,[u(_,{class:b(n("faqs")),to:{name:"faqs"}},{default:c(()=>[J]),_:1},8,["class"])])]),y(i).isKey("access_token")?(f(),E("div",ee,[o("button",{class:"btn btn-link text-decoration-none",onClick:a}," Logout ")])):(f(),E("div",X,[u(_,{to:{name:"user.login"},class:"btn btn-outline-primary me-2"},{default:c(()=>[Y]),_:1},8,["to"]),u(_,{to:{name:"user.signup"},class:"btn btn-primary"},{default:c(()=>[Z]),_:1},8,["to"])]))])]),o("div",te,[u(A,null,{default:c(({Component:S})=>[u(q,{name:"fade"},{default:c(()=>[(f(),k(C(S)))]),_:2},1024)]),_:1})]),o("div",oe,[o("footer",ne,[se,ae,o("ul",re,[o("li",ie,[u(_,{to:{name:"introduce"},class:"nav-link px-2 text-muted"},{default:c(()=>[ce]),_:1})]),o("li",le,[u(_,{to:{name:"faqs"},class:"nav-link px-2 text-muted"},{default:c(()=>[ue]),_:1})]),o("li",de,[u(_,{to:{name:"developer.center"},class:"nav-link px-2 text-muted"},{default:c(()=>[me]),_:1},8,["to"])])])])])])]),_:1})}}};N(_e).use(F()).use(B,{autoSetContainer:!0,appendToBody:!0}).use(L).mount("#app");export{x as _,K as u};
